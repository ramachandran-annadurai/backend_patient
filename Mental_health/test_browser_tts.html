<!DOCTYPE html>
<html>
<head>
    <title>Browser TTS Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 15px 25px; margin: 10px; font-size: 16px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #log { background: #f5f5f5; padding: 15px; margin: 15px 0; border-radius: 5px; height: 200px; overflow-y: auto; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>ðŸŽµ Browser TTS Test</h1>
    
    <button onclick="testTamilTTS()">Test Tamil TTS</button>
    <button onclick="testEnglishTTS()">Test English TTS</button>
    <button onclick="testMixedTTS()">Test Mixed TTS</button>
    <button onclick="stopTTS()">Stop TTS</button>
    
    <div id="log"></div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            logDiv.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function testTamilTTS() {
            log('ðŸ”„ Testing Tamil TTS...');
            
            const tamilText = "à®•à®°à¯à®ªà¯à®ªà®¿à®£à®¿ à®ªà¯†à®£à¯ à®šà¯à®¯ à®¨à®®à¯à®ªà®¿à®•à¯à®•à¯ˆ à®®à®±à¯à®±à¯à®®à¯ à®‰à®Ÿà®²à¯ à®®à®¾à®±à¯à®±à®™à¯à®•à®³à¯ à®ªà®±à¯à®±à®¿à®¯ à®•à®¤à¯ˆ";
            
            // Cancel any ongoing speech
            speechSynthesis.cancel();
            
            // Create utterance
            const utterance = new SpeechSynthesisUtterance(tamilText);
            utterance.lang = 'ta-IN'; // Tamil
            utterance.rate = 1.0;
            utterance.volume = 0.8;
            
            // Set up events
            utterance.onstart = () => {
                log('âœ… Tamil TTS started!', 'success');
            };
            
            utterance.onend = () => {
                log('âœ… Tamil TTS completed!', 'success');
            };
            
            utterance.onerror = (event) => {
                log(`âŒ Tamil TTS error: ${event.error}`, 'error');
                log('ðŸ’¡ Trying with English voice...', 'info');
                
                // Fallback to English
                const englishUtterance = new SpeechSynthesisUtterance(tamilText);
                englishUtterance.lang = 'en-US';
                englishUtterance.rate = 1.0;
                englishUtterance.volume = 0.8;
                
                englishUtterance.onstart = () => log('âœ… English fallback started!', 'success');
                englishUtterance.onend = () => log('âœ… English fallback completed!', 'success');
                englishUtterance.onerror = (event) => log(`âŒ English fallback error: ${event.error}`, 'error');
                
                speechSynthesis.speak(englishUtterance);
            };
            
            // Start speaking
            speechSynthesis.speak(utterance);
        }
        
        function testEnglishTTS() {
            log('ðŸ”„ Testing English TTS...');
            
            const englishText = "This is a test of English text-to-speech functionality.";
            
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(englishText);
            utterance.lang = 'en-US';
            utterance.rate = 1.0;
            utterance.volume = 0.8;
            
            utterance.onstart = () => log('âœ… English TTS started!', 'success');
            utterance.onend = () => log('âœ… English TTS completed!', 'success');
            utterance.onerror = (event) => log(`âŒ English TTS error: ${event.error}`, 'error');
            
            speechSynthesis.speak(utterance);
        }
        
        function testMixedTTS() {
            log('ðŸ”„ Testing Mixed TTS...');
            
            const mixedText = "à®•à®°à¯à®ªà¯à®ªà®¿à®£à®¿ à®ªà¯†à®£à¯ pregnancy story with mixed languages";
            
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(mixedText);
            utterance.lang = 'ta-IN';
            utterance.rate = 1.0;
            utterance.volume = 0.8;
            
            utterance.onstart = () => log('âœ… Mixed TTS started!', 'success');
            utterance.onend = () => log('âœ… Mixed TTS completed!', 'success');
            utterance.onerror = (event) => {
                log(`âŒ Mixed TTS error: ${event.error}`, 'error');
                log('ðŸ’¡ Trying with English voice...', 'info');
                
                const englishUtterance = new SpeechSynthesisUtterance(mixedText);
                englishUtterance.lang = 'en-US';
                englishUtterance.rate = 1.0;
                englishUtterance.volume = 0.8;
                
                englishUtterance.onstart = () => log('âœ… English fallback started!', 'success');
                englishUtterance.onend = () => log('âœ… English fallback completed!', 'success');
                englishUtterance.onerror = (event) => log(`âŒ English fallback error: ${event.error}`, 'error');
                
                speechSynthesis.speak(englishUtterance);
            };
            
            speechSynthesis.speak(utterance);
        }
        
        function stopTTS() {
            log('ðŸ›‘ Stopping TTS...');
            speechSynthesis.cancel();
            log('âœ… TTS stopped!', 'success');
        }
        
        // Auto-test on load
        window.onload = () => {
            log('ðŸš€ Browser TTS Test loaded');
            log('ðŸ’¡ Click buttons to test different TTS scenarios');
        };
    </script>
</body>
</html>
